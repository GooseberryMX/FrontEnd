{% extends 'AppBundle::base.html.twig' %}

{% block addMoreCSS %}
    <link rel="stylesheet" href="{{ asset('bundles/cvgooseberry/css/s3.upload.css') }}">
{% endblock %}

{% block bodyHeader %}
    {% include('AppBundle:Common:header.html.twig') with { active :'home' } %}
{% endblock %}

{% block bodyContent %}
    <div class="container-fluid content-breather-small" id="breadcrumbs">
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-sm-6">
                    <h4>{% trans %}Complete registration{% endtrans %}</h4>
                </div><!-- End of column one -->
                <div class="col-md-6 col-sm-6 text-right">
                    <ol class="breadcrumb">
                        <li><a href="{{ path('homepage') }}">{% trans %}Home{% endtrans %}</a></li>
                        <li class="active">{% trans %}Complete Registration{% endtrans %}</li>
                    </ol>
                </div><!-- End of column two -->
            </div><!-- End of row -->
        </div><!-- End of container -->
    </div><!-- End of fluid container -->

    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="completeRegistration">
                    <p>{% trans %}Thank you! Your email is confirmed, now you can complete your information.{% endtrans %}</p>
                    <ul class="nav nav-tabs" role="tablist" id="completeRegistrationTabs">
                        <li role="presentation" class="active"><a href="#investorsCompleteRegistrationTab" aria-controls="investorsCompleteRegistrationTab" role="tab" data-toggle="tab">{% trans %}Investors{% endtrans %}</a></li>
                        <li role="presentation"><a href="#fundraisersCompleteRegistrationTab" aria-controls="fundraisersCompleteRegistrationTab" role="tab" data-toggle="tab">{% trans %}Fundraisers{% endtrans %}</a></li>
                    </ul>
                    <div class="tab-content" style="padding-top: 20px">
                        <div role="tabpanel" class="tab-pane active" id="investorsCompleteRegistrationTab">
                            <form action="" role="form" name="investorsCompleteRegistrationForm" id="investorsCompleteRegistrationForm" method="post">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group input-group">
                                            <label for="birthday">{% trans %}Date of birth{% endtrans %}</label>
                                            {{ form_widget(form_investors.date_of_birth,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'false', 'placeholder':'mm/dd/yyyy'} }) }}
                                        </div>
                                        <div class="form-group input-group">
                                            <label for="tax-id">{% trans %}Tax ID number{% endtrans %}</label>
                                            {{ form_widget(form_investors.tax_id_number,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'false', 'placeholder':'Enter your tax ID'|trans} }) }}
                                        </div>
                                        {#<div class="form-group input-group">
                                            <label for="nationality">{% trans %}Nationality{% endtrans %}</label>
                                            {{form_widget(form_investors.nationality,{'attr':{'class':'form-control input-lg', 'required':'true' } }) }}
                                        </div>#}
                                        <div class="form-group input-group">
                                            <label for="address">{% trans %}Address{% endtrans %}</label>
                                            {{ form_widget(form_investors.address,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'false', 'placeholder':'Enter your address'|trans} }) }}
                                        </div>
                                        <div class="form-group input-group">
                                            <label for="neighborhood">{% trans %}Neighborhood{% endtrans %}</label>
                                            {{ form_widget(form_investors.neighborhood,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'false', 'placeholder':'Enter your neighborhood'|trans} }) }}
                                        </div>
                                        <div class="form-group input-group">
                                            <label for="city">{% trans %}City{% endtrans %}</label>
                                            {{ form_widget(form_investors.city,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'true', 'placeholder':'Enter your city'|trans} }) }}
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group input-group">
                                            <label for="state">{% trans %}State{% endtrans %}</label>
                                            {{ form_widget(form_investors.state,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'false', 'placeholder':'Enter your state'|trans} }) }}
                                        </div>
                                        <div class="form-group input-group">
                                            <label for="country">{% trans %}Country{% endtrans %}</label>
                                            {{form_widget(form_investors.country,{'attr':{'class':'form-control input-lg', 'required':'true' } }) }}
                                        </div>
                                        <div class="form-group input-group">
                                            <label for="zip-code">{% trans %}Zip Code{% endtrans %}</label>
                                            {{ form_widget(form_investors.zip,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'false', 'placeholder':'Enter zip code'|trans} }) }}
                                        </div>
                                        <div class="form-group input-group">
                                            <label for="phone">{% trans %}Phone Number{% endtrans %}</label>
                                            {{ form_widget(form_investors.phone,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'true', 'placeholder':'Enter your phone number'|trans} }) }}
                                        </div>
                                        {#<div class="form-group input-group">
                                            <label for="bank-account">{% trans %}Bank Account Number{% endtrans %}</label>
                                            {{ form_widget(form_investors.bank_account_id,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'true', 'placeholder':'Enter your bank account'|trans} }) }}
                                        </div>#}
                                        <div class="form-group input-group">
                                            <label for="file_scan_id_key">{% trans %}Scanned ID{% endtrans %}</label>
                                            <span class="fileinput-button upload-signed" id="file_scan_id_keyBox">
                                                <button name='upload' class='btn branding-background btn-lg'><i class="icon" data-icon="&#xe009;"></i></button>
                                                 <input id="file_scan_id_key" type="file" name="file_scan_id_key" class="s3_upload" signUrl = "{{ path('put_s3aws') }}"  data-parsley-required="false" data-parsley-class-handler="#file_scan_id_keyBox" />
                                                <div class="upload_status">
                                                    <div class="upload_info"><strong class="upload_name"></strong> - <span class="upload_text"></span></div>
                                                    <div class="progress_bar"><div class="percent"><span>0%</span></div></div>
                                                </div>
                                            </span>
                                            {{ form_widget(form_investors.file_scan_id) }}
                                        </div>
                                    </div>
                                </div>
                                <div class="text-center" style="margin-top: 20px">
                                    {{ form_widget(form_investors.investor_type) }}
                                    <input type="submit" id="investorsBtn" class="btn branding-background btn-lg" value="{% trans %}Submit application{% endtrans %}">
                                </div>

                            </form>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="fundraisersCompleteRegistrationTab">
                            <form action="" role="form" name="fundraisersCompleteRegistrationForm" id="fundraisersCompleteRegistrationForm" method="post">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group input-group">
                                            <label for="company-legal-name">{% trans %}Legal Name{% endtrans %}</label>
                                            {{ form_widget(form_fondraisers.company_name,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'true', 'placeholder':'Enter Legal Name'|trans} }) }}
                                        </div>
                                        <div class="form-group input-group">
                                            <label for="tax-id">{% trans %}Tax ID number{% endtrans %}</label>
                                            {{ form_widget(form_fondraisers.tax_id_number,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'true', 'placeholder':'Enter your tax ID'|trans} }) }}
                                        </div>
                                        {#<div class="form-group input-group">
                                            <label for="company-address">{% trans %}Company Address{% endtrans %}</label>
                                            {{ form_widget(form_fondraisers.company_address,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'true', 'placeholder':'Enter your Company address'|trans} }) }}
                                        </div>#}
                                        <div class="form-group input-group">
                                            <label for="neighborhood">{% trans %}Neighborhood{% endtrans %}</label>
                                            {{ form_widget(form_fondraisers.neighborhood,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'true', 'placeholder':'Enter your neighborhood'|trans} }) }}
                                        </div>
                                        <div class="form-group input-group">
                                            <label for="city">{% trans %}City{% endtrans %}</label>
                                            {{ form_widget(form_fondraisers.office_address_city,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'true', 'placeholder':'Enter your city'|trans} }) }}
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group input-group">
                                            <label for="state">{% trans %}State{% endtrans %}</label>
                                            {{ form_widget(form_fondraisers.state,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'true', 'placeholder':'Enter your state'|trans} }) }}
                                        </div>
                                        <div class="form-group input-group">
                                            <label for="country">{% trans %}Country{% endtrans %}</label>
                                            {{form_widget(form_fondraisers.office_address_country,{'attr':{'class':'form-control input-lg', 'required':'true' } }) }}
                                        </div>
                                        <div class="form-group input-group">
                                            <label for="zip-code">{% trans %}Zip Code{% endtrans %}</label>
                                            {{ form_widget(form_fondraisers.zip,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'true', 'placeholder':'Enter zip code'|trans} }) }}
                                        </div>
                                        <div class="form-group input-group">
                                            <label for="phone">{% trans %}Phone Number{% endtrans %}</label>
                                            {{ form_widget(form_fondraisers.company_phone,{'attr':{'class':'form-control input-lg', 'data-parsley-required':'true', 'placeholder':'Enter your phone number'|trans} }) }}
                                        </div>
                                    </div>
                                </div>
                                <div class="text-center" style="margin-top: 20px">
                                    {{ form_widget(form_fondraisers.investor_type) }}
                                    <input type="submit" id="fundraisersBtn" class="btn branding-background btn-lg" value="{% trans %}Submit application{% endtrans %}">
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div><!-- End of container -->

{% endblock %}

{% block addMoreJS %}
    <script src="{{ asset('bundles/cvgooseberry/js/s3.upload.js') }}"></script>
    <script src="{{ asset('bundles/cvgooseberry/js/bootstrap/bootstrap.js') }}"></script>
    <script src="{{ asset('bundles/cvgooseberry/js/css3-animate-it.js') }}"></script>
    <script src="{{ asset('bundles/cvgooseberry/js/bootstrap-hover-dropdown.js') }}"></script>
    <script src="{{ asset('bundles/cvgooseberry/js/modernizr.js') }}"></script>
    <script src="{{ asset('bundles/cvgooseberry/js/Slickform.js') }}"></script>
    <!-- Google maps api -->
    <script src="http://maps.google.com/maps/api/js?sensor=false&libraries=geometry&v=3.7"></script>
    <script src="{{ asset('bundles/cvgooseberry/js/maps.js') }}"></script>
    <script src="{{ asset('bundles/cvgooseberry/js/scripts.js') }}"></script>
    <script type="text/javascript">
        $(function() {
            $( "#investor_form_date_of_birth" ).datepicker();
            $('#completeRegistrationTabs li a').click( function(){
                $(this).blur();
            });
            $("#investorsBtn, #fundraisersBtn").click(function (e) {
                var isSubmit = true;
                if($(this).attr('id') === 'investorsBtn'){
                    $('#investor_form_investor_type').val('INVESTOR');
                    $('#fundraiser_form_fundraiser_type').val('');
                    /*if($('#file_scan_id_key').attr('filename') == undefined){
                        $('#investorsCompleteRegistrationForm [data-parsley-required="true"]').each( function(){
                            if($(this).attr('type') == 'file'){
                                $(this).closest('span').addClass('parsley-error');
                                $(this).focus( function(){
                                    $(this).closest('span').removeClass('parsley-error');
                                });
                            } else {
                                if($(this).val().length === 0) {
                                    $(this).addClass('parsley-error');
                                    $(this).focus( function(){
                                        $(this).removeClass('parsley-error');
                                    });
                                }
                            }
                        });
                        return false;
                    }*/

                } else {
                    $('#investor_form_investor_type').val('');
                    $('#fundraiser_form_investor_type').val('FUNDRAISER');
                }

                /* Validation */
                if($('#file_scan_id_key').attr('filename') != undefined){
                    $('#investor_form_file_scan_id').val('{"name":"' + $('#file_scan_id_key').attr('filename') + '","s3_url":"' + $('#file_scan_id_key').attr('s3_url').match(/\/\/.*\/(.*\/.*\/.*)\?.*/)[1] + '"}');
                }
            });
        });
    </script>
{% endblock %}